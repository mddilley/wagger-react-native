{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Option\", {\n  enumerable: true,\n  get: function get() {\n    return _option.Option;\n  }\n});\nexports.Select = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _reactNativeModal = _interopRequireDefault(require(\"react-native-modal\"));\n\nvar _select = require(\"./select.style\");\n\nvar _div = require(\"../div/div.component\");\n\nvar _text = require(\"../text/text.component\");\n\nvar _button = require(\"../button/button.component\");\n\nvar _theme = require(\"../../theme\");\n\nvar _option = require(\"./option.component\");\n\nvar _jsxFileName = \"/Users/pawankumar/Sites/react-native-magnus/src/ui/select/select.component.tsx\";\nvar Select = React.forwardRef(function (props, ref) {\n  var value = props.value,\n      title = props.title,\n      footer = props.footer,\n      data = props.data,\n      multiple = props.multiple,\n      _renderItem = props.renderItem,\n      keyExtractor = props.keyExtractor,\n      onSelectProp = props.onSelect;\n\n  var _useContext = (0, React.useContext)(_theme.ThemeContext),\n      theme = _useContext.theme;\n\n  var _useState = (0, React.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isVisible = _useState2[0],\n      setIsVisible = _useState2[1];\n\n  var _useState3 = (0, React.useState)(value),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      selectedValue = _useState4[0],\n      setSelectedValue = _useState4[1];\n\n  var computedStyle = (0, _select.getStyle)(theme, props);\n  (0, React.useImperativeHandle)(ref, function () {\n    return {\n      close: function close() {\n        setIsVisible(false);\n      },\n      open: function open() {\n        setIsVisible(true);\n      }\n    };\n  });\n\n  var onSelect = function onSelect(value) {\n    var finalValue;\n\n    if (multiple) {\n      var copy = selectedValue.slice();\n      var index = selectedValue.indexOf(value);\n\n      if (index !== -1) {\n        copy.splice(index, 1);\n      } else {\n        copy.push(value);\n      }\n\n      setSelectedValue(copy);\n      finalValue = copy;\n    } else {\n      setSelectedValue(value);\n      setIsVisible(false);\n      finalValue = value;\n    }\n\n    onSelectProp(finalValue);\n  };\n\n  var renderTitle = function renderTitle() {\n    if (title) {\n      return typeof title === 'string' ? React.createElement(_text.Text, {\n        fontSize: \"md\",\n        color: \"gray700\",\n        px: \"xl\",\n        pt: \"md\",\n        pb: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }\n      }, title) : title;\n    }\n\n    return false;\n  };\n\n  var renderFooter = function renderFooter() {\n    if (footer) return footer;\n    if (!multiple) return false;\n    return React.createElement(_button.Button, {\n      block: true,\n      bg: \"green600\",\n      mx: \"xl\",\n      mt: \"lg\",\n      onPress: function onPress() {\n        setIsVisible(false);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, \"Submit\");\n  };\n\n  return React.createElement(_reactNativeModal.default, {\n    backdropTransitionOutTiming: 0,\n    animationIn: \"slideInUp\",\n    isVisible: isVisible,\n    backdropColor: \"black\",\n    onBackdropPress: function onBackdropPress() {\n      return setIsVisible(false);\n    },\n    hideModalContentWhileAnimating: true,\n    style: {\n      margin: 0,\n      justifyContent: 'flex-end'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, React.createElement(_div.Div, {\n    style: computedStyle.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, React.createElement(_reactNative.SafeAreaView, {\n    style: computedStyle.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, renderTitle(), React.createElement(_reactNative.FlatList, {\n    data: data,\n    keyExtractor: keyExtractor,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      return React.cloneElement(_renderItem(item, index), {\n        onSelect: onSelect,\n        selectedValue: selectedValue\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }), renderFooter())));\n});\nexports.Select = Select;\nSelect.defaultProps = {\n  bg: 'white',\n  rounded: 'none',\n  flexDir: 'column',\n  keyExtractor: function keyExtractor(item, index) {\n    return \"\".concat(index);\n  }\n};","map":{"version":3,"sources":["select.component.tsx"],"names":["Select","React","value","title","footer","data","multiple","renderItem","keyExtractor","onSelectProp","props","theme","ThemeContext","isVisible","setIsVisible","selectedValue","setSelectedValue","computedStyle","close","open","onSelect","copy","index","finalValue","renderTitle","renderFooter","margin","justifyContent","item","bg","rounded","flexDir"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { useContext, useState, useImperativeHandle } from 'react';\nimport { SafeAreaView, FlatList } from 'react-native';\nimport RNModal from 'react-native-modal';\n\nimport { getStyle } from './select.style';\nimport { Div } from '../div/div.component';\nimport { Text } from '../text/text.component';\nimport { Button } from '../button/button.component';\nimport { ThemeContext } from '../../theme';\nimport { Option } from './option.component';\nimport { SelectProps } from './select.type';\n\ntype Ref = {};\n\nconst Select = React.forwardRef<Ref, SelectProps>((props, ref) => {\n  const {\n    value,\n    title,\n    footer,\n    data,\n    multiple,\n    renderItem,\n    keyExtractor,\n    onSelect: onSelectProp,\n  } = props;\n  const { theme } = useContext(ThemeContext);\n  const [isVisible, setIsVisible] = useState(false);\n  const [selectedValue, setSelectedValue] = useState(value);\n  const computedStyle = getStyle(theme, props);\n\n  /**\n   * exposing functions to parent\n   */\n  useImperativeHandle(ref, () => ({\n    close() {\n      setIsVisible(false);\n    },\n    open() {\n      setIsVisible(true);\n    },\n  }));\n\n  /**\n   * set values of select based if its multiple select\n   * or single valued select\n   *\n   * @param value\n   */\n  const onSelect = (value: any) => {\n    let finalValue;\n\n    if (multiple) {\n      const copy = selectedValue.slice();\n      const index = selectedValue.indexOf(value);\n      if (index !== -1) {\n        copy.splice(index, 1);\n      } else {\n        copy.push(value);\n      }\n\n      setSelectedValue(copy);\n      finalValue = copy;\n    } else {\n      setSelectedValue(value);\n      setIsVisible(false);\n      finalValue = value;\n    }\n\n    onSelectProp(finalValue);\n  };\n\n  /**\n   * render title at top select modal\n   */\n  const renderTitle = () => {\n    if (title) {\n      return typeof title === 'string' ? (\n        <Text fontSize=\"md\" color=\"gray700\" px=\"xl\" pt=\"md\" pb=\"lg\">\n          {title}\n        </Text>\n      ) : (\n        title\n      );\n    }\n\n    return false;\n  };\n\n  const renderFooter = () => {\n    if (footer) return footer;\n\n    // if the component is single-valued and no footer is provided\n    // don't render anything in footer\n    if (!multiple) return false;\n\n    return (\n      <Button\n        block\n        bg=\"green600\"\n        mx=\"xl\"\n        mt=\"lg\"\n        onPress={() => {\n          setIsVisible(false);\n        }}\n      >\n        Submit\n      </Button>\n    );\n  };\n\n  return (\n    <RNModal\n      backdropTransitionOutTiming={0}\n      animationIn=\"slideInUp\"\n      isVisible={isVisible}\n      backdropColor=\"black\"\n      onBackdropPress={() => setIsVisible(false)}\n      hideModalContentWhileAnimating\n      style={{\n        margin: 0,\n        justifyContent: 'flex-end',\n      }}\n    >\n      <Div style={computedStyle.wrapper}>\n        <SafeAreaView style={computedStyle.container}>\n          {renderTitle()}\n          <FlatList\n            data={data}\n            keyExtractor={keyExtractor}\n            renderItem={({ item, index }) =>\n              React.cloneElement(renderItem(item, index), {\n                onSelect,\n                selectedValue,\n              })\n            }\n          />\n          {renderFooter()}\n        </SafeAreaView>\n      </Div>\n    </RNModal>\n  );\n});\n\nSelect.defaultProps = {\n  bg: 'white',\n  rounded: 'none',\n  flexDir: 'column',\n  // @ts-ignore\n  keyExtractor: (item, index) => `${index}`,\n};\n\nexport { Option, Select };\n"]},"metadata":{},"sourceType":"script"}
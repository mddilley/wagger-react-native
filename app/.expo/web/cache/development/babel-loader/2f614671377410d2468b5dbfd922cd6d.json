{"ast":null,"code":"import _taggedTemplateLiteralLoose from \"@babel/runtime/helpers/taggedTemplateLiteralLoose\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/michaeldilley/Wagger/app/App.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteralLoose([\"\\n  flex: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport CustomLogin from \"./auth/CustomLogin\";\nimport Routes from \"./nav/routes\";\nimport NavFab from \"./components/NavFab\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport styled from \"styled-components\";\nimport { ThemeProvider } from \"react-native-magnus\";\nimport { theme } from \"./styles/theme\";\nimport Amplify from \"aws-amplify\";\nimport { ApolloProvider, ApolloClient, InMemoryCache, createHttpLink } from \"@apollo/client\";\nimport { setContext } from \"@apollo/client/link/context\";\nimport awsmobile from \"./aws-exports\";\nimport { useUserSession } from \"./auth/userSession\";\nvar GRAPHQL_ENDPOINT = \"https://wagger-react-native-db.herokuapp.com/v1/graphql\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsmobile), {}, {\n  Analytics: {\n    disabled: true\n  }\n}));\nexport var FlexSafeAreaView = styled(SafeAreaView)(_templateObject());\n\nvar App = function App() {\n  var _useUserSession = useUserSession(),\n      user = _useUserSession.user,\n      getUserJwt = _useUserSession.getUserJwt;\n\n  var httpLink = createHttpLink({\n    uri: GRAPHQL_ENDPOINT\n  });\n  var authLink = setContext(function (_, _ref) {\n    var headers = _ref.headers;\n    var token = getUserJwt();\n    var role = \"user\";\n    return {\n      headers: _objectSpread(_objectSpread({}, headers), {}, {\n        authorization: token ? \"Bearer \" + token : \"\",\n        \"x-hasura-role\": role ? role : \"\"\n      })\n    };\n  });\n  var client = new ApolloClient({\n    link: authLink.concat(httpLink),\n    cache: new InMemoryCache()\n  });\n  return React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, React.createElement(StatusBar, {\n    barStyle: \"dark-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), React.createElement(FlexSafeAreaView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, !user ? React.createElement(CustomLogin, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }) : React.createElement(ApolloProvider, {\n    client: client,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, React.createElement(Routes, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), React.createElement(NavFab, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/michaeldilley/Wagger/app/App.js"],"names":["React","CustomLogin","Routes","NavFab","styled","ThemeProvider","theme","Amplify","ApolloProvider","ApolloClient","InMemoryCache","createHttpLink","setContext","awsmobile","useUserSession","GRAPHQL_ENDPOINT","configure","Analytics","disabled","FlexSafeAreaView","SafeAreaView","App","user","getUserJwt","httpLink","uri","authLink","_","headers","token","role","authorization","client","link","concat","cache"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP;AACA,OAAOC,MAAP;;;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,SAASC,KAAT;AAEA,OAAOC,OAAP,MAAoB,aAApB;AACA,SACEC,cADF,EAEEC,YAFF,EAGEC,aAHF,EAIEC,cAJF,QAKO,gBALP;AAMA,SAASC,UAAT,QAA2B,6BAA3B;AAEA,OAAOC,SAAP;AACA,SAASC,cAAT;AAEA,IAAMC,gBAAgB,GACpB,yDADF;AAIAR,OAAO,CAACS,SAAR,iCACKH,SADL;AAEEI,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD;AAFb;AAOA,OAAO,IAAMC,gBAAgB,GAAGf,MAAM,CAACgB,YAAD,CAAT,mBAAtB;;AAIP,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,wBACaP,cAAc,EAD3B;AAAA,MACRQ,IADQ,mBACRA,IADQ;AAAA,MACFC,UADE,mBACFA,UADE;;AAIhB,MAAMC,QAAQ,GAAGb,cAAc,CAAC;AAAEc,IAAAA,GAAG,EAAEV;AAAP,GAAD,CAA/B;AAEA,MAAMW,QAAQ,GAAGd,UAAU,CAAC,UAACe,CAAD,QAAoB;AAAA,QAAdC,OAAc,QAAdA,OAAc;AAE9C,QAAMC,KAAK,GAAGN,UAAU,EAAxB;AACA,QAAMO,IAAI,GAAG,MAAb;AAGA,WAAO;AACLF,MAAAA,OAAO,kCACFA,OADE;AAELG,QAAAA,aAAa,EAAEF,KAAK,eAAaA,KAAb,GAAuB,EAFtC;AAGL,yBAAiBC,IAAI,GAAGA,IAAH,GAAU;AAH1B;AADF,KAAP;AAOD,GAb0B,CAA3B;AAgBA,MAAME,MAAM,GAAG,IAAIvB,YAAJ,CAAiB;AAC9BwB,IAAAA,IAAI,EAAEP,QAAQ,CAACQ,MAAT,CAAgBV,QAAhB,CADwB;AAE9BW,IAAAA,KAAK,EAAE,IAAIzB,aAAJ;AAFuB,GAAjB,CAAf;AAKA,SACE,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAEJ,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAE,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACgB,IAAD,GACC,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAGC,oBAAC,cAAD;AAAgB,IAAA,MAAM,EAAEU,MAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAJJ,CAFF,CADF;AAeD,CA1CD;;AA4CA,eAAeX,GAAf","sourcesContent":["import React from \"react\";\nimport CustomLogin from \"./auth/CustomLogin\";\nimport Routes from \"./nav/routes\";\nimport NavFab from \"./components/NavFab\";\nimport { StatusBar, SafeAreaView } from \"react-native\";\nimport styled from \"styled-components\";\nimport { ThemeProvider } from \"react-native-magnus\";\nimport { theme } from \"./styles/theme\";\n\nimport Amplify from \"aws-amplify\";\nimport {\n  ApolloProvider,\n  ApolloClient,\n  InMemoryCache,\n  createHttpLink,\n} from \"@apollo/client\";\nimport { setContext } from \"@apollo/client/link/context\";\n\nimport awsmobile from \"./aws-exports\";\nimport { useUserSession } from \"./auth/userSession\";\n\nconst GRAPHQL_ENDPOINT =\n  \"https://wagger-react-native-db.herokuapp.com/v1/graphql\";\n\n// Configure AWS Amplify\nAmplify.configure({\n  ...awsmobile,\n  Analytics: {\n    disabled: true,\n  },\n});\n\nexport const FlexSafeAreaView = styled(SafeAreaView)`\n  flex: 1;\n`;\n\nconst App = () => {\n  const { user, getUserJwt } = useUserSession();\n\n  // Setup Apollo Links to connect to endpoint and add headers\n  const httpLink = createHttpLink({ uri: GRAPHQL_ENDPOINT });\n\n  const authLink = setContext((_, { headers }) => {\n    // Get the authentication token and role from user if it exists\n    const token = getUserJwt();\n    const role = \"user\";\n\n    // Return the headers and role to the context so httpLink can read them\n    return {\n      headers: {\n        ...headers,\n        authorization: token ? `Bearer ${token}` : \"\",\n        \"x-hasura-role\": role ? role : \"\",\n      },\n    };\n  });\n\n  // Initialize Apollo Client\n  const client = new ApolloClient({\n    link: authLink.concat(httpLink),\n    cache: new InMemoryCache(),\n  });\n\n  return (\n    <ThemeProvider theme={theme}>\n      <StatusBar barStyle={\"dark-content\"} />\n      <FlexSafeAreaView>\n        {!user ? (\n          <CustomLogin />\n        ) : (\n          <ApolloProvider client={client}>\n            <Routes />\n            <NavFab />\n          </ApolloProvider>\n        )}\n      </FlexSafeAreaView>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
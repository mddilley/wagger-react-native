{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Tooltip = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _text = require(\"../text/text.component\");\n\nvar _tooltip = require(\"./tooltip.style\");\n\nvar _theme = require(\"../../theme\");\n\nvar _triangle = require(\"./triangle.component\");\n\nvar _jsxFileName = \"/Users/pawankumar/Sites/react-native-magnus/src/ui/tooltip/tooltip.component.tsx\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function () {\n    var Super = (0, _getPrototypeOf2.default)(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar STATES = {\n  HIDDEN: 'HIDDEN',\n  ANIMATING: 'ANIMATING',\n  SHOWN: 'SHOWN'\n};\n\nvar EASING = _reactNative.Easing.bezier(0.4, 0, 0.2, 1);\n\nvar SCREEN_INDENT = 8;\n\nvar Tooltip = function (_React$Component) {\n  (0, _inherits2.default)(Tooltip, _React$Component);\n\n  var _super = _createSuper(Tooltip);\n\n  function Tooltip() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Tooltip);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_container\", (0, React.createRef)());\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"state\", {\n      menuState: STATES.HIDDEN,\n      top: 0,\n      left: 0,\n      menuWidth: 0,\n      menuHeight: 0,\n      buttonWidth: 0,\n      buttonHeight: 0,\n      menuMarginAnimation: new _reactNative.Animated.Value(-8),\n      opacityAnimation: new _reactNative.Animated.Value(0)\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_onMenuLayout\", function (e) {\n      if (_this.state.menuState === STATES.ANIMATING) {\n        return;\n      }\n\n      var _e$nativeEvent$layout = e.nativeEvent.layout,\n          width = _e$nativeEvent$layout.width,\n          height = _e$nativeEvent$layout.height;\n      var useNativeDriver = _this.props.useNativeDriver;\n\n      _this.setState({\n        menuState: STATES.ANIMATING,\n        menuWidth: width,\n        menuHeight: height\n      }, function () {\n        _reactNative.Animated.parallel([_reactNative.Animated.timing(_this.state.menuMarginAnimation, {\n          toValue: 0,\n          duration: _this.props.animationDuration,\n          easing: EASING,\n          useNativeDriver: useNativeDriver\n        }), _reactNative.Animated.timing(_this.state.opacityAnimation, {\n          toValue: 1,\n          duration: _this.props.animationDuration,\n          easing: EASING,\n          useNativeDriver: useNativeDriver\n        })]).start();\n      });\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_onDismiss\", function () {\n      if (_this.props.onHidden) {\n        _this.props.onHidden();\n      }\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"show\", function () {\n      if (_this._container.current) {\n        _this._container.current.measureInWindow(function (left, top, buttonWidth, buttonHeight) {\n          _this.setState({\n            buttonHeight: buttonHeight,\n            buttonWidth: buttonWidth,\n            left: left,\n            menuState: STATES.SHOWN,\n            top: top\n          });\n        });\n      }\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"hide\", function () {\n      var onHidden = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n      var useNativeDriver = _this.props.useNativeDriver;\n\n      _reactNative.Animated.timing(_this.state.opacityAnimation, {\n        toValue: 0,\n        duration: _this.props.animationDuration,\n        easing: EASING,\n        useNativeDriver: useNativeDriver\n      }).start(function () {\n        _this.setState({\n          menuState: STATES.HIDDEN,\n          menuMarginAnimation: new _reactNative.Animated.Value(-8),\n          opacityAnimation: new _reactNative.Animated.Value(0)\n        }, function () {\n          if (onHidden) {\n            onHidden();\n          }\n\n          if (_reactNative.Platform.OS !== 'ios' && _this.props.onHidden) {\n            _this.props.onHidden();\n          }\n        });\n      });\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"_hide\", function () {\n      _this.hide();\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(Tooltip, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var dimensions = _reactNative.Dimensions.get('window');\n\n      var windowHeight = dimensions.height - (_reactNative.StatusBar.currentHeight || 0);\n      var _this$state = this.state,\n          menuHeight = _this$state.menuHeight,\n          buttonHeight = _this$state.buttonHeight,\n          opacityAnimation = _this$state.opacityAnimation,\n          menuMarginAnimation = _this$state.menuMarginAnimation;\n      var top = this.state.top;\n      var invert = false;\n\n      if (top + menuHeight + buttonHeight + SCREEN_INDENT > windowHeight) {\n        top = top - menuHeight - SCREEN_INDENT;\n        invert = true;\n      } else if (top < SCREEN_INDENT) {\n        top = SCREEN_INDENT + buttonHeight;\n      } else {\n        top = top + buttonHeight + SCREEN_INDENT;\n        invert = false;\n      }\n\n      var shadowMenuContainerStyle = {\n        opacity: opacityAnimation,\n        top: top,\n        marginTop: menuMarginAnimation\n      };\n      var menuState = this.state.menuState;\n      var animationStarted = menuState === STATES.ANIMATING;\n      var modalVisible = menuState === STATES.SHOWN || animationStarted;\n      var _this$props = this.props,\n          text = _this$props.text,\n          style = _this$props.style,\n          children = _this$props.children;\n      return React.createElement(_theme.ThemeContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 7\n        }\n      }, function (_ref) {\n        var theme = _ref.theme;\n        var computedStyle = (0, _tooltip.getStyle)(theme, _this2.props, _objectSpread(_objectSpread({}, _this2.state), {}, {\n          invert: invert\n        }));\n        return React.createElement(_reactNative.View, {\n          ref: _this2._container,\n          onLayout: function onLayout() {\n            return null;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }\n        }, React.createElement(_reactNative.View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }\n        }, children), React.createElement(_reactNative.Modal, {\n          visible: modalVisible,\n          onRequestClose: _this2._hide,\n          supportedOrientations: ['portrait', 'portrait-upside-down', 'landscape', 'landscape-left', 'landscape-right'],\n          transparent: true,\n          onDismiss: _this2._onDismiss,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }\n        }, React.createElement(_reactNative.TouchableWithoutFeedback, {\n          onPress: _this2._hide,\n          accessible: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }\n        }, React.createElement(_reactNative.View, {\n          style: _reactNative.StyleSheet.absoluteFill,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }\n        }, React.createElement(_reactNative.Animated.View, {\n          onLayout: _this2._onMenuLayout,\n          style: [styles.shadowMenuContainer, shadowMenuContainerStyle, style],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 21\n          }\n        }, React.createElement(_triangle.Triangle, {\n          invert: invert,\n          style: computedStyle.triangle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 23\n          }\n        }), React.createElement(_reactNative.Animated.View, {\n          style: computedStyle.container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 23\n          }\n        }, typeof text === 'string' ? React.createElement(_text.Text, {\n          style: computedStyle.text,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 27\n          }\n        }, text) : text))))));\n      });\n    }\n  }]);\n  return Tooltip;\n}(React.Component);\n\nexports.Tooltip = Tooltip;\n(0, _defineProperty2.default)(Tooltip, \"defaultProps\", {\n  animationDuration: 300,\n  bg: 'gray900',\n  color: 'white',\n  p: 'lg',\n  rounded: 'xl',\n  mx: 'lg',\n  minW: 50,\n  zIndex: 1,\n  fontSize: 'md',\n  useNativeDriver: false\n});\n\nvar styles = _reactNative.StyleSheet.create({\n  shadowMenuContainer: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    borderRadius: 4,\n    opacity: 0,\n    width: '100%'\n  },\n  menuContainer: {\n    overflow: 'hidden'\n  }\n});","map":{"version":3,"sources":["tooltip.component.tsx"],"names":["STATES","HIDDEN","ANIMATING","SHOWN","EASING","Easing","SCREEN_INDENT","Tooltip","React","Component","animationDuration","bg","color","p","rounded","mx","minW","zIndex","fontSize","useNativeDriver","menuState","top","left","menuWidth","menuHeight","buttonWidth","buttonHeight","menuMarginAnimation","Animated","opacityAnimation","width","height","e","toValue","duration","easing","onHidden","Platform","dimensions","Dimensions","windowHeight","StatusBar","invert","shadowMenuContainerStyle","opacity","marginTop","animationStarted","modalVisible","text","style","children","theme","computedStyle","StyleSheet","styles","shadowMenuContainer","position","backgroundColor","borderRadius","menuContainer","overflow"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { createRef } from 'react';\n\nimport {\n  Animated,\n  Dimensions,\n  Easing,\n  Modal,\n  Platform,\n  StatusBar,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  LayoutChangeEvent,\n} from 'react-native';\n\nimport { Text } from '../text/text.component';\nimport { TooltipProps } from './tooltip.type';\nimport { getStyle } from './tooltip.style';\nimport { ThemeContext } from '../../theme';\nimport { Triangle } from './triangle.component';\n\nconst STATES = {\n  HIDDEN: 'HIDDEN',\n  ANIMATING: 'ANIMATING',\n  SHOWN: 'SHOWN',\n};\n\nconst EASING = Easing.bezier(0.4, 0, 0.2, 1);\nconst SCREEN_INDENT = 8;\n\nclass Tooltip extends React.Component<TooltipProps> {\n  static defaultProps = {\n    animationDuration: 300,\n    bg: 'gray900',\n    color: 'white',\n    p: 'lg',\n    rounded: 'xl',\n    mx: 'lg',\n    minW: 50,\n    zIndex: 1,\n    fontSize: 'md',\n    useNativeDriver: false,\n  };\n\n  _container = createRef<View>();\n\n  state = {\n    menuState: STATES.HIDDEN,\n\n    top: 0,\n    left: 0,\n\n    menuWidth: 0,\n    menuHeight: 0,\n\n    buttonWidth: 0,\n    buttonHeight: 0,\n\n    menuMarginAnimation: new Animated.Value(-8),\n    opacityAnimation: new Animated.Value(0),\n  };\n\n  // Start menu animation\n  _onMenuLayout = (e: LayoutChangeEvent) => {\n    if (this.state.menuState === STATES.ANIMATING) {\n      return;\n    }\n\n    const { width, height } = e.nativeEvent.layout;\n    const { useNativeDriver } = this.props;\n\n    this.setState(\n      {\n        menuState: STATES.ANIMATING,\n        menuWidth: width,\n        menuHeight: height,\n      },\n      () => {\n        Animated.parallel([\n          Animated.timing(this.state.menuMarginAnimation, {\n            toValue: 0,\n            duration: this.props.animationDuration,\n            easing: EASING,\n            useNativeDriver: useNativeDriver!,\n          }),\n          Animated.timing(this.state.opacityAnimation, {\n            toValue: 1,\n            duration: this.props.animationDuration,\n            easing: EASING,\n            useNativeDriver: useNativeDriver!,\n          }),\n        ]).start();\n      }\n    );\n  };\n\n  _onDismiss = () => {\n    if (this.props.onHidden) {\n      this.props.onHidden();\n    }\n  };\n\n  show = () => {\n    if (this._container.current) {\n      this._container.current.measureInWindow(\n        (left: any, top: any, buttonWidth: any, buttonHeight: any) => {\n          this.setState({\n            buttonHeight,\n            buttonWidth,\n            left,\n            menuState: STATES.SHOWN,\n            top,\n          });\n        }\n      );\n    }\n  };\n\n  hide = (onHidden: () => void = () => {}) => {\n    const { useNativeDriver } = this.props;\n\n    Animated.timing(this.state.opacityAnimation, {\n      toValue: 0,\n      duration: this.props.animationDuration,\n      easing: EASING,\n      useNativeDriver: useNativeDriver!,\n    }).start(() => {\n      // Reset state\n      this.setState(\n        {\n          menuState: STATES.HIDDEN,\n          menuMarginAnimation: new Animated.Value(-8),\n          opacityAnimation: new Animated.Value(0),\n        },\n        () => {\n          if (onHidden) {\n            onHidden();\n          }\n\n          // Invoke onHidden callback if defined\n          if (Platform.OS !== 'ios' && this.props.onHidden) {\n            this.props.onHidden();\n          }\n        }\n      );\n    });\n  };\n\n  // @@ TODO: Rework this\n  _hide = () => {\n    this.hide();\n  };\n\n  render() {\n    const dimensions = Dimensions.get('window');\n    const windowHeight = dimensions.height - (StatusBar.currentHeight || 0);\n\n    const {\n      menuHeight,\n      buttonHeight,\n      opacityAnimation,\n      menuMarginAnimation,\n    } = this.state;\n\n    // Adjust position of menu\n    let { top } = this.state;\n    let invert = false;\n\n    if (top + menuHeight + buttonHeight + SCREEN_INDENT > windowHeight) {\n      top = top - menuHeight - SCREEN_INDENT;\n      invert = true;\n    } else if (top < SCREEN_INDENT) {\n      top = SCREEN_INDENT + buttonHeight;\n    } else {\n      top = top + buttonHeight + SCREEN_INDENT;\n      invert = false;\n    }\n\n    const shadowMenuContainerStyle = {\n      opacity: opacityAnimation,\n      top,\n      marginTop: menuMarginAnimation,\n    };\n\n    const { menuState } = this.state;\n    const animationStarted = menuState === STATES.ANIMATING;\n    const modalVisible = menuState === STATES.SHOWN || animationStarted;\n\n    const { text, style, children } = this.props;\n\n    return (\n      <ThemeContext.Consumer>\n        {({ theme }) => {\n          const computedStyle = getStyle(theme, this.props, {\n            ...this.state,\n            invert,\n          });\n\n          return (\n            <View ref={this._container} onLayout={() => null}>\n              <View>{children}</View>\n              <Modal\n                visible={modalVisible}\n                onRequestClose={this._hide}\n                supportedOrientations={[\n                  'portrait',\n                  'portrait-upside-down',\n                  'landscape',\n                  'landscape-left',\n                  'landscape-right',\n                ]}\n                transparent\n                onDismiss={this._onDismiss}\n              >\n                <TouchableWithoutFeedback\n                  onPress={this._hide}\n                  accessible={false}\n                >\n                  <View style={StyleSheet.absoluteFill}>\n                    <Animated.View\n                      onLayout={this._onMenuLayout}\n                      style={[\n                        styles.shadowMenuContainer,\n                        shadowMenuContainerStyle,\n                        style,\n                      ]}\n                    >\n                      <Triangle\n                        invert={invert}\n                        style={computedStyle.triangle}\n                      />\n                      <Animated.View style={computedStyle.container}>\n                        {typeof text === 'string' ? (\n                          <Text style={computedStyle.text}>{text}</Text>\n                        ) : (\n                          text\n                        )}\n                      </Animated.View>\n                    </Animated.View>\n                  </View>\n                </TouchableWithoutFeedback>\n              </Modal>\n            </View>\n          );\n        }}\n      </ThemeContext.Consumer>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  shadowMenuContainer: {\n    position: 'absolute',\n    backgroundColor: 'transparent',\n    borderRadius: 4,\n    opacity: 0,\n    width: '100%',\n  },\n  menuContainer: {\n    overflow: 'hidden',\n  },\n});\n\nexport { Tooltip };\n"]},"metadata":{},"sourceType":"script"}